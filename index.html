<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Тарифы</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <div class="inner">
            <div class="item">
                <button class="btn basic" id="btn1">
                    <span class="tariff-name">Базовый</span><br>
                    <span class="tariff-price">100₽</span>
                </button>
            </div>
            <div class="item">
                <button class="btn standard" id="btn2">
                    <span class="tariff-name">Стандартный</span><br>
                    <span class="tariff-price">200₽</span>
                </button>
            </div>
            <div class="item">
                <button class="btn premium" id="btn3">
                    <span class="tariff-name">Премиум</span><br>
                    <span class="tariff-price">300₽</span>
                </button>
            </div>
        </div>
    </div>
    <div class="usercard" id="usercard">
        <!-- User card content -->
    </div>
    <script>
        let tg = window.Telegram.WebApp;

        tg.MainButton.textColor = '#FFFFFF';
        tg.MainButton.color = '#2cab37';

        let item = "";
        let tariff_name = "";
        let tariff_1 = document.getElementById("btn1");
        let tariff_2 = document.getElementById("btn2");
        let tariff_3 = document.getElementById("btn3");



        tariff_1.addEventListener("click", () => {
            if (tg.MainButton.isVisible) {
                tg.MainButton.hide();
            }
            else {
                tg.MainButton.setText("Вы выбрали тариф Базовый!");
                item = "1";
                item_price = 100000;
                tariff_name = 'Тариф "Базовый"';
                tg.MainButton.show();
            }
        });

        tariff_2.addEventListener("click", function(){
            if (tg.MainButton.isVisible) {
                tg.MainButton.hide();
            }
            else {
                tg.MainButton.setText("Вы выбрали тариф Стандартный!");
                item = "2";
                item_price = 200000;
                tariff_name = 'Тариф "Стандартный"';
                tg.MainButton.show();
            }
        });

        tariff_3.addEventListener("click", function(){
            if (tg.MainButton.isVisible) {
                tg.MainButton.hide();
            }
            else {
                tg.MainButton.setText("Вы выбрали тариф Премиум!");
                item = "3";
                item_price = 300000;
                tariff_name = 'Тариф "Премиум"';
                tg.MainButton.show();
            }
        });


        Telegram.WebApp.onEvent("mainButtonClicked", () => {
            let data = {
                item_id: item,
                tariff: tariff_name
            }
        //     let invoice_data = {
        // "title": "Тариф" + tariff_name,
        // "description": "Оплата за тариф" + tariff_name,
        // "payload": "test-invoice-payload",
        // "provider_token": "401643678:TEST:2cd5739f-8274-4b9d-8736-8cdf404944a5",
        // "currency": "RUB",
        // "prices": item_price,
        // "start_parameter": "test-invoice"
        //     }

            // tg.openInvoice(invoice_data)
            tg.sendData(JSON.stringify(data));
        });


        // let usercard = document.getElementById("usercard");
        //
        // let p = document.createElement("p");
        //
        // p.innerText = `${tg.initDataUnsafe.user.first_name}
        // ${tg.initDataUnsafe.user.last_name}`;
        //
        // usercard.appendChild(p);
    </script>
</body>
</html>
